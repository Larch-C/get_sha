name: Get SHA with git ls-remote
on: workflow_dispatch

jobs:
  git-ls:
    runs-on: ubuntu-latest
    outputs:
      sha: ${{ steps.get_sha.outputs.sha }}
    steps:
      - name: Get sha using git ls-remote
        id: get_sha
        run: |
          sha=$(git ls-remote https://github.com/AstrBotDevs/AstrBot.git refs/heads/master | cut -f1)
          echo "sha=$sha" >> $GITHUB_OUTPUT
          # å†™åˆ° step summaryï¼ˆUI æ˜Žæ˜¾ï¼‰
          printf "## ðŸ”Ž git ls-remote result\n\n**SHA:** `%s`\n\n" "$sha" >> "$GITHUB_STEP_SUMMARY"
          # å¤§æ ‡è®°è¾“å‡ºåˆ°æ—¥å¿—
          echo ">>>>>> LATEST MASTER SHA: $sha <<<<<<"

      - name: Print sha
        run: echo "sha = ${{ steps.get_sha.outputs.sha }}"
